% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ec_pc.R
\name{ec_pc}
\alias{ec_pc}
\title{Calculate Probability of Connectivity (PC)}
\usage{
ec_pc(pa, max_prob_matrix, ecoregion_area)
}
\arguments{
\item{pa}{sf object containing protected areas with a 'type' column distinguishing
between "ecoregion" and "transboundary" areas, typically generated by \code{\link[=ec_add_transboundary_pa]{ec_add_transboundary_pa()}}}

\item{max_prob_matrix}{Numeric matrix of maximum product probabilities between all
protected areas, typically generated by \code{\link[=ec_max_product_probability]{ec_max_product_probability()}}}

\item{ecoregion_area}{sf object or total area of the ecoregion in(\eqn{\text{km}^2})}
}
\value{
Numeric value representing the PC metric (dimensionless, typically between 0 and 1)
}
\description{
This function calculates the Probability of Connectivity (PC) metric, which represents
the probability that two randomly selected locations within an ecoregion fall into
protected areas that are connected to each other. PC is one of the fundamental metrics
underlying the ProtConn indicator.
}
\details{
The PC metric is calculated using the formula:
\deqn{PC = \frac{1}{A_L^2} \sum_{i=1}^{n} \sum_{j=1}^{n} a_i \times a_j \times p_{ij}^*}{%
PC = (1 / A_L^2) * sum_i sum_j (a_i * a_j * p_ij*)}

where:
\itemize{
\item \eqn{A_L} is the total area of the landscape/ecoregion
\item \eqn{a_i} and \eqn{a_j} are the areas of protected areas i and j
\item \eqn{p_{ij}^*} is the maximum probability of connection between areas i and j
\item n is the number of protected areas within the ecoregion
}

Note that only protected areas within the ecoregion are
considered as sources and destinations, though transboundary areas contribute to
connectivity as stepping stones.
}
\examples{
\donttest{
library(dplyr)
# Benin - treated as single ecoregion
benin <- fiwac \%>\%
  dplyr::filter(ISO3_CODE == "BEN")

# Protected area
prot_area <- pas

# repare data first
prepared_data <- ec_prepare_data(
  pa = prot_area,
  ecoregion = benin,
  min_area = 1
)

# Add transboundary PAs with default 70km buffer
complete_pa <- ec_add_transboundary_pa(prepared_data, buffer_km = 70)

# Calculate edge-to-edge distances
dist_matrix <- ec_pa_distances(complete_pa, method = "edge")

# For a more mobile species (30km median dispersal)
prob_matrix <- ec_dispersal_probability(dist_matrix, median_dispersal = 30)

# Limit to maximum 3 stepping stones
max_prob <- ec_max_product_probability(prob_matrix, max_steps = 3)

# Calculate PC metric
pc_value <- ec_pc(
  pa = complete_pa,
  max_prob_matrix = max_prob,
  ecoregion_area = benin
)
}
}
\references{
Saura, S., Bastin, L., Battistella, L., Mandrici, A., & Dubois, G. (2017).
Protected areas in the world's ecoregions: How well connected are they?
Ecological Indicators, 76, 144-158. \doi{10.1016/j.ecolind.2016.12.047}

Saura, S., & Pascual-Hortal, L. (2007). A new habitat availability index to integrate
connectivity in landscape conservation planning: comparison with existing indices and
application to a case study. Landscape and Urban Planning, 83(2-3), 91-103.
\doi{doi.org/10.1016/j.landurbplan.2007.03.005}
}
